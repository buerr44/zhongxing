<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet"/>
    <link id="bootstrap-rtl-link" href="" rel="stylesheet"/>
    <link href="/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="/css/weather-icons.min.css" rel="stylesheet"/>

    <link
            href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300"
            rel="stylesheet" type="text/css">

    <link href="/css/demo.min.css" rel="stylesheet"/>
    <link href="/css/typicons.min.css" rel="stylesheet"/>
    <link href="/css/animate.min.css" rel="stylesheet"/>
    <link href="/css/bootstrap-table.css" rel="stylesheet"/>
    <link href="/css/toastr.css" rel="stylesheet"/>
    <link href="/css/fileinput.min.css" rel="stylesheet"/>

    <script src="/js/jquery-2.0.3.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/bootstrap-table.js?t=4"></script>
    <script src="/js/bootstrap-table-zh-CN.js"></script>
    <script src="/js/toastr.js"></script>
    <script src="/js/bootbox.min.js"></script>
    <script src="/js/bootstrap-datetimepicker.min.js"></script>
    <script src="/js/fileinput.min.js"></script>
    <script src="/js/fileinput_local_zh.js"></script>
    <style>
        .file-preview-frame{width: 180px;}
    </style>
    <script type="text/javascript">
        toastr.options = {
            "closeButton": true, //是否显示关闭按钮
            "positionClass": "toast-top-right", //弹出窗的位置
            "showDuration": "300", //显示的动画时间
            "hideDuration": "300", //消失的动画时间
            "timeOut": "3000", //展现时间
            "showEasing": "swing", //显示时的动画缓冲方式
            "hideEasing": "linear", //消失时的动画缓冲方式
            "showMethod": "fadeIn", //显示时的动画方式
            "hideMethod": "fadeOut" //消失时的动画方式
        };
        var rowData = 0;
        /**
         * 点击变色
         */
        $(document).on('click', 'tr', function () {
            $(this).addClass('selected').siblings().removeClass('selected');
        });
        /**
         * 表格初始化方法
         * @returns {Object}
         * @constructor
         */
        var TableInit = function () {
            var oTableInit = new Object();
            //初始化Table
            oTableInit.Init = function () {
                $('#mytable').bootstrapTable({
                    url: '/feedback/list',
                    method: 'post',
                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                    toolbar: '.toolbar',                //工具按钮用哪个容器
                    toolbarAlign: 'left',
                    cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
                    pagination: true,                   //是否显示分页（*）
                    sortable: true,                     //是否启用排序
                    sidePagination: "client",           //分页方式：client客户端分页，server服务端分页（*）
                    pageNumber: 1,                       //初始化加载第一页，默认第一页
                    pageSize: 8,                       //每页的记录行数（*）
                    pageList: [8, 15, 20, 25],        //可供选择的每页的行数（*）
                    search: true,                       //是否显示表格搜索
                    showColumns: true,                  //是否显示所有的列
                    minimumCountColumns: 2,             //最少允许的列数
                    //height: 800,
                    singleSelect: true, 				//单行选中，一次只能选择一行
                    clickToSelect: true,
                    sortName: 'createDate',
                    sortOrder: 'desc',

                    onClickCell: function (index, value, row) {
                        rowData = row;
                    },
                    showToggle: true,                    //是否显示详细视图和列表视图的切换按钮
                    queryParams: function (params) { //查询字段，每次选择下拉菜单的时候，重新刷新表格就行
                        return {
                            feedbackType: $("#sel_feedbackType").val(),
                            userType:$("#sel_userType").val(),
                        }
                    },
                    columns: [
                        {
                            title: '序号',
                            align: 'center',
                            formatter: function (value, row, index) {
                                return index + 1;
                            }
                        },{
                            field: 'fbId',
                            title: '反馈id',
                            sortable: true,
                            align: "center",
                            visible: false,
                        },{
                            field: 'status',
                            title: '反馈类型',
                            sortable: true,
                            align: "center",
                            formatter: function (value, row, index) {
                                if(value == 0){
                                    return "平台意见";
                                }else if(value == 1){
                                    return "课程意见";
                                }
                            }
                        }, {
                            field: 'description',
                            title: '反馈内容',
                            sortable: true,
                            align: "center",
                            width:300,
                        }, {
                            field: 'role',
                            title: '用户类型',
                            sortable: true,
                            align: "center",
                            formatter: function (value, row, index) {
                                if(value == 0){
                                    return "外部用户";
                                }else if(value == 1){
                                    return "一汽大众";
                                }
                            }
                        }, {
                            field: 'createBy',
                            title: '用户ID',
                            sortable: true,
                            align: "center"
                        }, {
                            field: 'createDate',
                            title: '提交时间',
                            sortable: true,
                            align: "center",
                        }, {
                            field: 'courseCode',
                            title: '课程编码',
                            sortable: true,
                            align: "center",
                            formatter: function (value, row, index) {
                                if(value == null || value.trim() == ""){
                                    return "/";
                                }else{
                                    return value;
                                }
                            }
                        }, {
                            field: 'teacher',
                            title: '讲师',
                            sortable: true,
                            align: "center",
                            formatter: function (value, row, index) {
                                if(value == null || value.trim() == ""){
                                    return "/";
                                }else{
                                    return value;
                                }
                            }
                        }],
                })
            };

            return oTableInit;
        }

        /**
         * 表格重加载方法
         */
        function reload(){
            $("#mytable").bootstrapTable('refresh');
            rowData = 0;
        }

    </script>
</head>
<body>
<div class="row">
    <div class="col-xs-12 col-md-12">
        <div class="widget">
            <div class="widget-body">

                <div class="toolbar">
                    <H5 style="float:left;margin-right: 5px">反馈类型:</H5>
                    <select class="form-control" style="width:180px;float:left;margin-right: 5px" id="sel_feedbackType" onchange="reload()">
                        <option value = "-1">所有类型</option>
                        <option value = "0">平台意见</option>
                        <option value = "1">课程意见</option>
                    </select>
                    <H5 style="float:left;margin-right: 5px">用户类型:</H5>
                    <select class="form-control" style="width:180px;float:left;margin-right: 5px" id="sel_userType" onchange="reload()">
                        <option value = "-1">所有类型</option>
                        <option value = "0">外部用户</option>
                        <option value = "1">一汽大众</option>
                    </select>
                </div>
                <table class="table " id="mytable">

                </table>
            </div>
        </div>
    </div>
</div>
<script>
    var oTable = new TableInit();
    oTable.Init();
</script>
</body>
</html>